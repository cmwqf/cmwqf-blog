---
title: 浅谈询问分块
date: 2020-04-20 11:48:25
tags: [分块]
categories: [学习笔记]
---

# 询问分块

什么是询问分块？

对于一些题目，它的操作我们无法用高级数据结构在$log_2n$时间复杂度内解决，那么，我们可以考虑，对询问分块，定期重构，使复杂度降为$\sqrt{n}$级别。

注意，这个询问分块的适用范围还是比较广泛的，因为它只需要答案重构复杂度为$O(n)$，且对于一个修改，我们能很快，如在$O(1)$或$O(log_2n)$的时间内，计算出它对某个询问的贡献，那么我们就可以用这种对询问分块的方法。

实际上，对询问分块可以看成一种强大的暴力。

<!--more-->

# 原理

我们考虑两种暴力：

第一种，对于一个修改，我们用它暴力更新所有答案（例如单点加，区间查询，我们每加一个数，就修改所有前缀和）；第二种，对于一个询问，我们暴力枚举前面所有的修改，计算其对当前询问的影响。

这两种暴力，时间复杂度都是$O(1)-O(n)$的，只不过第一种使询问$O(1)$，修改$O(n)$，第二种为询问$O(n)$，修改$O(1)$。那么，我们能不能把这两种暴力