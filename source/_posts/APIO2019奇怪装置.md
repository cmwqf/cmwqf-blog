---
title: APIO2019奇怪装置
date: 2019-06-26 22:29:07
tags: [数论]
---

# Description

对于时间t,，定义
$$
(x,y)=((t+\lfloor\frac{t}{B}\rfloor)\quad mod\quad A,\quad t\quad mod\quad B)
$$
给定n个区间$(li,ri)$，求有多少个不同的$(x,y)$。

# Solution

考场上脑子抽了直接放弃了这道题，所以打铁回家了（丢人），现在想来，其实不难。。。

推式子，如果两个$t1,t2$是相同的，那么有
$$
t1+\lfloor\frac{t1}{B}\rfloor\equiv t2+\lfloor\frac{t2}{B}\rfloor(mod\quad A)\\
t1\equiv t2(mod \quad B)
$$
那么
$$
设x=t1\quad mod\quad B=t2\quad mod\quad B带入上面\\
t1+\frac{t1-x}{B}\equiv t2+\frac{t2-x}{B}(mod\quad A)\\
(B+1)(t2-t1)\equiv0(mod\quad A)
$$
这个式子说明
$$
A|(B+1)(t2-t1)\\
设(B+1)(t2-t1)=kA\\
t2=t1+k*\frac{A}{B+1}\\
$$